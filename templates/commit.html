<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Commits par Minute</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script>
     google.charts.load('current', {'packages':['corechart']});

function drawChart(dataArray) {
    var data = google.visualization.arrayToDataTable(dataArray, false); // false pour indiquer que la première ligne contient les labels

    var options = {
        title: 'Commits par Minute',
        legend: { position: 'bottom' }
    };

    var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
    chart.draw(data, options);
}

function loadCommitData() {
    // Simulons une réponse de l'API pour l'exemple
    const commitsData = [
        ['Minute', 'Nombre de Commits'], // Les labels pour les colonnes
        ['10', 5], // Exemple de données, où '10' est la minute et 5 le nombre de commits
        ['20', 8], // Assurez-vous que ces valeurs sont correctes selon vos données
    ];

    // Transformation des données pour s'assurer que l'axe des Y est numérique
    const transformedData = commitsData.map(row => {
        if (row[1] !== 'Nombre de Commits') { // S'assurer de ne pas convertir l'en-tête
            return [row[0], parseInt(row[1], 10)]; // Convertir la chaîne de caractères en entier
        }
        return row; // Retourner l'en-tête sans modification
    });

    drawChart(transformedData);
}

google.charts.setOnLoadCallback(loadCommitData);
   
</body>
</html>
