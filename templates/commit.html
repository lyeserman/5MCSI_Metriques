<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Commits par Minute</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script>
        google.charts.load('current', {'packages':['corechart']});

        // Fonction pour dessiner le graphique
        function drawChart(dataArray) {
            var data = google.visualization.arrayToDataTable(dataArray);

            var options = {
                title: 'Commits par Minute',
                legend: { position: 'bottom' }
            };

            var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
            chart.draw(data, options);
        }

        // Fonction pour charger les données des commits et les traiter
        async function loadCommitData() {
            const response = await fetch('https://api.github.com/repos/OpenRSI/5MCSI_Metriques/commits');
            const commits = await response.json();
            const minutesCount = {}; // Pour compter les commits par minute

            for (const commit of commits) {
                // Ici, vous devriez appeler votre route Flask pour extraire les minutes
                // et incrémenter le compteur pour chaque minute.
                // Cet exemple ne montre pas cette étape pour simplifier.
            }

            // Convertir les données en un format utilisable par Google Charts
            const dataArray = [['Minute', 'Nombre de Commits']];
            // Ici, ajoutez vos données traitées à dataArray

            // Dessiner le graphique avec les données traitées
            google.charts.setOnLoadCallback(() => drawChart(dataArray));
        }
    </script>
</head>
<body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
    <script>loadCommitData();</script>
</body>
</html>
